@startuml

title Verteilungsdiagramm

rectangle "3D-Drucker-Pool Verwaltung"  {

    rectangle Serverraum {

        node "Router" as es1 <<device>>   {
        [Routing] <<component>>
        [Firewall] <<component>>
        }
        node "Zentraler Druck-/Verwaltungsserver" as zds  <<device>> {
          [Auswahl]
          [Steuern]
          [Auftragswarteschlange]

          node  "Web-Server" as ds  <<device>> {
            node "Web-Modul"{
                [Druckauftragsverwaltung]
                [Druckerverwaltung]
                [Druckauftragsverwaltung]
                [Benutzerverwaltung]
            }
          }
          node  "Datenbankserver" as dbs  <<device>> {
              database Drucker
              database Benutzer
              database Sicherheit
              database Aufträge
        }
         storage Speicher {
            [Videodaten]
            [Druckdaten]
          }

        }
        node "Sicherheits-Server" as shs <<device>> {
          [Empfang + Versand] as em_sicherheit
          [Alarm] <<artifact>>
          [Notstop] <<artifact>>
          [Monitoring] <<component>>
          [Sicherheitsdaten]

          [Firewall] <<component>>
          [Netzwerk-Schnittestelle] as ns_shs
          storage Speicher as stor {
            [Backup]
          }
        }
        node "Computer" <<device>> {
        [Verwalten]
        }
    }

    rectangle Druckerraum {

        node "Ethernet-Switch" as es2  {
        [RJ45-Port] as ns_es2
        }

        node "Steuerungs-Druckserver" as std  <<device>> {
        [API-Schnittstelle] as ve_steuerung
        [Netzwerk-Schnittestelle] as ns_std
        }
        node "USB Hub" as usbhub  <<device>> {
        [Netzwerk-Schnittestelle] as usbhub_std
        }

        node "3D-Drucker" as 3dd <<device>> {
          [Drucken]
          [Status] as 3dd_status
          }
          together {
            node "Sensoren" as s <<device>> {
              [Überwachung]
              [Erfassung]
            }
            node "Kameras" as c <<device>> {
              [Bilderfassung]
              [Übertragung]
            }
        }
          node "Robotor-Arm" as ra  <<device>> {
          [Druckbettwechsel]
          [Bewegung]
        }

    }

    ' Verlinkung
    Druckerraum -[hidden]d->Serverraum
      3dd -u-> usbhub :<<USB>>
      c -u-> usbhub :<<USB>>
      ra -l-> usbhub :<<USB>>
      s --> usbhub :<<TCP/IP>>
      usbhub -u->es1:<<TCP/IP>>
      std -> es1:<<TCP/IP>>
      std --> zds :<<TCP/IP>>
      zds --> shs :<<TCP/IP>>
      es1 -- es2

     zds --> ds
     shs --> ds
}


@enduml